#
#description:
#author:wuhongliang
#date:2016-06-03 14:12:41
#modify:
#
testcase {

  attr = {"id" => "ZLBF_6.1.4", "level" => "P1", "auto" => "n"}

  def prepare

  end

  def process

    operate("1 打开外网连接设置") {
      @wan_page = RouterPageObject::WanPage.new(@browser)
    }
    operate("2 设置外网DHCP接入") {
      puts "设置接入方式为DHCP".to_gbk
      @wan_page.set_dhcp(@browser, @browser.url)
    }
    operate("3 查看WAN状态") {
      sys_page = RouterPageObject::SystatusPage.new(@browser)
      sys_page.open_systatus_page(@browser.url)
      wan_type = sys_page.get_wan_type
      wan_addr = sys_page.get_wan_ip
      puts "查询到WAN接入方式为#{wan_type}".to_gbk
      puts "查询到WAN IP为#{wan_addr}".to_gbk
      assert_match @ts_tag_ip_regxp, wan_addr, 'dhcp获取ip地址失败！'
      assert_match /#{@ts_wan_mode_dhcp}/, wan_type, '接入类型错误！'
    }

    operate("4 验证业务") {
      rs1 = ping(@ts_default_ip)
      assert(rs1, '路由器无法登录')
      rs2 = ping(@ts_web)
      assert(rs2, '无法连接网络')
    }

    operate("5 发送ICMP Flood报文"){
      HtmlTag::Packets.new()
    }


    operate(""){

    }

  end

  def clearup


  end

}
