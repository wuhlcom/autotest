require 'net/telnet'
# localhost = Net::Telnet::new("Host" => "192.168.100.1",
#                              "Timeout" => 10,
#                              "Waittime"=>1,
#                              "Prompt" => /[$%#>:] \z/n)
# localhost.login("admin", "admin") { |c| print c }
# localhost.cmd("free") { |c| print c }
# localhost.close

##########################Telnet Router##########
# ip = "192.168.100.1"
# usr="admin"
# pw = "admin"
# localhost = Net::Telnet::new("Host" => ip,
#                              "Timeout" => 10,
#                              "Waittime"=> 1,
#                              "Prompt" => /[$%#>:] \z/n)
# localhost.login(usr, pw) { |c| print c }
# 在string后添加换行符后,将其发送到远程主机上,并等待远程主机输出下一个提示match.
# match的默认值取自是new中指定的"Prompt". timeout的默认值取自new中指定的"Timeout".
# 若带块调用的话, 则把输出字符串当做参数来依次运行块的内容.
# localhost.cmd("String"=>"top","Match"=>/CPU:/,"Timeout"=>2) { |c| print c }
#\cc==Ctrl+c
# quit = "quit"
# localhost.cmd(quit) { |c| print c }
# localhost.cmd("\cc") { |c| print c }
# localhost.close

